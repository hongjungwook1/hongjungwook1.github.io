---
title: AWS 배포와 인프라 구성 가이드
description: >-
  클라우드 컴퓨팅은 흔히 말하는 Azure, AWS 등과 같이 서버를 구축하고 배포할 수 있는 인프라스트럭처를 의미합니다. 오늘은 “AWS를 쓴다.”는 말이 구체적으로 어떤 의미인지 그리고 클라우드 컴퓨팅을 왜 선택하는지에 대해 자세히 알아보겠습니다.
author: JWHONG
date: 2025-02-14 11:00:00 +0900
categories: [AWS, Cloud, 서버 배포, 인프라, Cloud Computing]
tags: [AWS, Cloud, 서버 배포, 인프라, Cloud Computing]
pin: true
media_subpath: "/posts/20250214"
---

## AWS를 쓴다는 것은?

AWS를 사용한다는 것은 크게 두 가지 작업을 포함합니다.

- **서버 구축**

  - **네트워크 구성** : Private, Public 네트워크를 설정합니다.
  - **서버 임대(또는 구매)** : 구성한 네트워크 위에 실제 서버(가상 또는 물리)를 할당하여 구동시킵니다.

- **코드 배포**
  - 우리가 개발한 코드를 위에 구축된 서버에 빌드 및 배포하여 웹 서비스를 제공합니다.

---

## 클라우드 컴퓨팅을 왜 쓸까? : 비용과 효율성

대기업, 스타트업, 개인, 팀 프로젝트 등 모든 규모의 서비스가 물리 서버 대신 클라우드 서버를 선택하는 이유는 비용 효율성에 있습니다.

### 온디맨드 비용 구조

- 온디맨드 과금: 사용한 만큼만 비용을 지불합니다.

  - **유저 수/트래픽 양에 따른 과금**

    - **대기업/중견기업** : 트래픽이 많더라도 들쑥날쑥할 경우 트래픽이 발생할 때만 비용 지출.
    - **스타트업/학생 팀 프로젝트** : 트래픽이 적다면 프리 티어(무료)로도 운영 가능.

- **서버 스펙 선택** : 서비스 특성에 따라 메모리, CPU, GPU 등 원하는 서버를 선택하여 임대할 수 있습니다.

### 물리 서버(온프레미스) vs. 가상 서버(클라우드 서버)

**물리 서버 (온프레미스)**

> 고정 비용 + 직접 운영/관리 필요

- **특징**

  - 기업 요구사항에 맞춰 직접 데이터센터(중소형)를 구축하고 유지보수.

- **단점**

  - 건물, 전원, 냉방, 백업 시스템, 네트워킹 장비 등 다양한 비용과 관리 인력이 필요합니다.
  - 한 번 구축하면 수요에 관계없이 지속적인 관리가 필요합니다.

**가상 서버 (클라우드 서버)**

> 온디맨드 비용 + AWS가 대신 운영 및 관리

- **특징**

  - 이미 구축된 초거대 데이터센터에서 필요한 만큼만 서버를 임대합니다.
  - **빠른 설정** : 몇 번의 클릭만으로 네트워크와 서버를 몇 초 안에 구축할 수 있습니다.
  - **비용 절감** : 피크 트래픽에 맞춰 비용을 지불하므로 불필요한 자원 낭비가 줄어듭니다.

- **비교 비유**

  - **물리 서버** : 단독주택 → 맞춤 설계, 모든 것을 직접 관리
  - **가상 서버** : 오피스텔 → 이미 구축된 공간을 임대하여 사용

**서버리스(Serverless)**

> **서버리스는 “서버를 구매하거나 조립하지 않는다”는 의미가 아닙니다. 서버가 구동 중이면 비용이 발생합니다.**

- **서버리스 특징**

  - **요청 횟수 기반 과금** : 요청이 들어올 때마다 필요한 서버(또는 컨테이너)를 생성해 작업 후 종료합니다.

- **주의**

  - 요청이 드물더라도 필요한 자원이 크다면 과금이 급증할 수 있으므로 계산이 필수입니다.

---

## 클라우드 서비스 모델: IaaS, PaaS, SaaS

어플리케이션 서비스는 다음 순서로 개발됩니다.

1. **네트워크 구축**
2. **서버 구축** (CPU, 메모리, 저장소 선택)
3. **OS 선택 및 런타임 구성**
4. **어플리케이션 구동**

클라우드 서비스 제공 모델은 개발자가 직접 구축해야 하는 부분과 클라우드 제공자가 관리해주는 부분에 따라 달라집니다.

- **IaaS (Infrastructure as a Service)**

  - 제공: 네트워크, 서버, OS 및 런타임 구성

- **PaaS (Platform as a Service)**

  - 제공: 네트워크, 서버, OS, 런타임 구성 및 배포 요소

- **SaaS (Software as a Service)**

  - 제공: 완성된 소프트웨어 서비스

![Image](https://github.com/user-attachments/assets/9fa3180a-464c-4033-9ad9-8a98921aee43)

이미지 출처 : (https://8pmbiz.com/8PM-SaaS-MES)

---

## AWS 인프라 구조: Region → AZ → IDC

AWS는 전 세계 여러 리전(Region)에 서비스를 제공하며 각 리전은 여러 가용 영역(AZ)과 데이터 센터(IDC)로 구성됩니다.

- **Region**

  - **정의** : 국가 단위의 물리적 위치.
  - **예시** : 한국, 일본, 북미 등.
  - **특징** : 대부분의 AWS 서비스는 특정 리전 내에서 운영됩니다(Region-scoped).

- **Availability Zone (AZ)**

  - **정의** : 한 리전 내에서 지리적으로 분산된 데이터 센터 집합.
  - **예시** : 시드니 리전(ap-southeast-2)은 3개의 AZ (ap-southeast-2a, 2b, 2c)로 구성.
  - **특징** : 단일 AZ에 문제가 생길 경우 다른 AZ로 서비스 연속성을 보장하기 위함(Multi AZ).

- **Internet Data Center (IDC)**

  - **정의** : 실제 물리 서버가 위치한 데이터 센터.
  - **구성** : 각 AZ는 보통 2개 이상의 IDC로 구성됩니다.

![Image](https://github.com/user-attachments/assets/f4131c61-2897-48ee-90fc-69c865b2dc06)

이미지 출처 : ASAC 07 강의 자료

---

## AWS 서비스 분류: 리전 서비스 vs. 글로벌 서비스

AWS 서비스는 운영되는 위치에 따라 두 가지로 분류됩니다.

- **리전 서비스**

  - **정의** : 특정 리전(Region) 또는 AZ 내에서 제공되는 서비스.
  - **예시**
    - **EC2** : 서버 인스턴스
    - **RDS, DynamoDB** : 데이터베이스 서비스
    - **S3** : 정적 리소스 저장소
    - **Lambda**: 서버리스 함수 실행
    - **Elastic Beanstalk** : PaaS 기반 배포 서비스

- **글로벌 서비스**

  - **정의** : 리전과 관계없이 전 세계에서 제공되어야 하는 서비스.
  - **예시**
    - **IAM** : 계정 및 권한 관리
    - **Route53** : DNS 서비스
    - **CloudFront** : CDN 서비스
    - **WAF** : 웹 어플리케이션 방화벽
    - **Certificate Manager**: HTTPS 인증서 관리
    - **Secrets Manager** : 비밀 키 관리

**AWS 자원 관리: ARN**

모든 AWS 자원은 **ARN (AWS Resource Name)**이라는 고유 식별자를 가지고 있으며 이를 통해 자원 관리를 일원화합니다.

---

## AWS 시작하기: VPC를 통한 네트워크 구성

AWS 환경을 구축할 때 가장 먼저 시작하는 단계는 **VPC(Virtual Private Cloud)** 설정입니다.
VPC를 통해 자신만의 클라우드 내부 네트워크를 생성하고 네트워크 구성을 체계적으로 관리할 수 있습니다.

### VPC와 서브넷 구성

- **VPC 생성**

  - 예를 들어 “IP 약 1000개 사용”과 같이 원하는 가용 IP 대역을 지정합니다.

- **서브넷 분할**

  - VPC에서 할당받은 IP 대역을 서브넷으로 분할합니다.
  - 일반적으로 Private 서브넷과 Public 서브넷으로 나누며
    - **Private 서브넷**은 서버나 데이터베이스 등 외부 접속이 불필요한 리소스용
    - **Public 서브넷**은 외부와 통신해야 하는 리소스용으로 사용합니다.
  - **참고**: **Private**이나 **Public**이라는 이름은 단지 레이블일 뿐 실제 외부 접속 여부는 **Route Table** 설정에 따라 결정됩니다.

- **Multi AZ 구성**

  - 보통 1개의 VPC 내에 4개의 서브넷(Private 2개, Public 2개)을 만들어 AZ별로 분산시켜 가용성을 높입니다.

### VPC 외부 통신 구성

**Internet Gateway(IGW)와 Route Table**

- **Internet Gateway (IGW)**

  - VPC 내부 서버가 외부와 양방향 통신을 할 수 있도록 외부 IP 할당과 NAT 주소 변환 기능을 제공합니다.

- **Public Subnet 구성**

  1. VPC에 IGW를 연결한 후
  2. **Route Table**을 사용해 Public 서브넷에서 모든 트래픽(0.0.0.0/0)이 IGW로 전달되도록 설정합니다.

  - Route Table 설정 방법:
    - **명시적 연결(Explicit Subnet Associations)** : 개발자가 직접 생성한 Route Table을 특정 서브넷에 할당.
    - **비명시적 연결(Default Route Table)** : VPC 생성 시 기본적으로 할당된 Route Table이 서브넷에 자동 연결됨.
  - 예시: 서브넷 내 모든 요청(0.0.0.0/0)을 IGW(igw-xxxxxxxx)로 라우팅.

---

**NAT Gateway/Instance와 Private Subnet**

- **NAT Gateway/Instance**

  - Private 서브넷 내 인스턴스들이 외부(예: npm, gradle 등)와 **단방향(아웃바운드)** 통신할 수 있도록 해줍니다.
  - **NAT Instance**는 Public 서브넷에 배치하여 여러 Private 인스턴스의 외부 접속을 단일 Public IP로 대리합니다.

- **IP Masquerading**

  - NAT Gateway/Instance는 Private IP를 Public IP로 변환(재작성)하여 외부와 통신합니다.
  - **주의** : NAT와 Proxy는 비슷해 보일 수 있으나 NAT는 Layer 3/4에서 단순 패킷 변환을 수행하며 Proxy는 Layer 7에서 추가적인 보안 기능을 제공합니다.

- **NAT Instance 생성 시 주의사항**

  - **Source/Destination Check**를 반드시 **비활성화**해야 합니다.
    - 활성화되어 있으면 NAT 역할을 제대로 수행하지 못해 에러가 발생할 수 있습니다.

---

**SSH Tunneling과 Bastion 호스트**

- **Bastion 호스트(SSH Tunneling, Jump Box)**

  - Private 서브넷 내 서버에 외부에서 직접 접속할 수 없으므로 Public 서브넷에 위치한 Bastion 서버를 거쳐 SSH 접속을 수행합니다.

- **구성 방식**

  1. **Local (개발자 PC) → Bastion (Public 서브넷)**
  2. **Bastion → Server (Private 서브넷)**

- **보안 키 구성**
  - 예시로 **local-to-bastion.pem (Local에서 Bastion 접속용)**과 **local-to-private.pem (Bastion을 통해 Private 서버 접속용)** 두 개의 키 페어를 사용합니다.

---

### 결론

클라우드 컴퓨팅은 **비용 효율성**과 **유연성** 덕분에 모든 규모의 기업과 개인 프로젝트에서 필수적인 인프라가 되었습니다.

- **AWS**와 같은 클라우드 플랫폼은 물리 서버 대비 빠른 구축, 손쉬운 관리, 온디맨드 비용 지불 등의 장점을 제공합니다.
- 서버리스 아키텍처와 **다양한 서비스 모델(IaaS, PaaS, SaaS)**을 통해 개발자는 핵심 비즈니스 로직에 집중할 수 있게 됩니다.
- **VPC 구성, IGW/Route Table, NAT Gateway/Instance** 그리고 **Bastion** 등을 올바르게 설정하면 안정적이면서도 효율적인 인프라 운영이 가능합니다.
